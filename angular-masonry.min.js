!function(n,r){"use strict";"function"==typeof define&&define.amd?define(["angular","Masonry"],r):"object"==typeof exports?module.exports=r(angular,Masonry):n.angularMasonry=r(angular,Masonry)}(this,function(n,r){"use strict";n.module("code.masonry",[]).controller("masonryController",function(){function o(){return!!i.config&&!!i.config.masonryContainer}function t(){var o={itemSelector:"["+i.config.masonryItem+"]"},t=i.config.masonryOption?n.extend(o,i.config.masonryOption):o;i.container=new r("["+i.config.masonryContainer+"]",t)}function e(){i.container.layout()}var i=this;i.config={},i.postRender=null,i.ready=o,i.initialize=t,i.reLayout=e}).directive("masonry",function(){function n(n){var r=n.children();if(r.length>=1&&void 0!==r.attr("data-masonry-item")){var o=r.attr("data-masonry-after-render","");r.remove(),n.append(o)}return{post:function(n,r,o,t){t.config.masonryContainer=o.$attr.masonry,t.config.masonryOption=JSON.parse(o.masonryOptions||"{}")}}}var r={restrict:"A",controller:"masonryController",compile:n};return r}).directive("masonryItem",function(){function n(n,r,o,t){n.$last&&t.ready()&&(t.config.masonryItem=o.$attr.masonryItem,t.initialize())}var r={restrict:"A",require:"^masonry",priority:1,link:n};return r}).directive("masonryAfterRender",["$timeout",function(n){function r(r,o,t,e){if(r.$last){var i=null;i=n(function(){e.reLayout(),n.cancel(i)})}}var o={restrict:"A",require:"^masonry",priority:0,link:r};return o}])});
!function(t,i){"use strict";"function"==typeof define&&define.amd?define(["outlayer/outlayer","get-size/get-size","fizzy-ui-utils/utils"],i):"object"==typeof exports?module.exports=i(require("outlayer"),require("get-size"),require("fizzy-ui-utils")):t.Masonry=i(t.Outlayer,t.getSize,t.fizzyUIUtils)}(window,function(t,i,e){"use strict";var o=t.create("masonry");return o.prototype._resetLayout=function(){this.getSize(),this._getMeasurement("columnWidth","outerWidth"),this._getMeasurement("gutter","outerWidth"),this.measureColumns();var t=this.cols;for(this.colYs=[];t--;)this.colYs.push(0);this.maxY=0},o.prototype.measureColumns=function(){if(this.getContainerWidth(),!this.columnWidth){var t=this.items[0],e=t&&t.element;this.columnWidth=e&&i(e).outerWidth||this.containerWidth}var o=this.columnWidth+=this.gutter,s=this.containerWidth+this.gutter,h=s/o,r=o-s%o,n=r&&1>r?"round":"floor";h=Math[n](h),this.cols=Math.max(h,1)},o.prototype.getContainerWidth=function(){var t=this.options.isFitWidth?this.element.parentNode:this.element,e=i(t);this.containerWidth=e&&e.innerWidth},o.prototype._getItemLayoutPosition=function(t){t.getSize();var i=t.size.outerWidth%this.columnWidth,o=i&&1>i?"round":"ceil",s=Math[o](t.size.outerWidth/this.columnWidth);s=Math.min(s,this.cols);for(var h=this._getColGroup(s),r=Math.min.apply(Math,h),n=e.indexOf(h,r),a={x:this.columnWidth*n,y:r},u=r+t.size.outerHeight,l=this.cols+1-h.length,c=0;l>c;c++)this.colYs[n+c]=u;return a},o.prototype._getColGroup=function(t){if(2>t)return this.colYs;for(var i=[],e=this.cols+1-t,o=0;e>o;o++){var s=this.colYs.slice(o,o+t);i[o]=Math.max.apply(Math,s)}return i},o.prototype._manageStamp=function(t){var e=i(t),o=this._getElementOffset(t),s=this.options.isOriginLeft?o.left:o.right,h=s+e.outerWidth,r=Math.floor(s/this.columnWidth);r=Math.max(0,r);var n=Math.floor(h/this.columnWidth);n-=h%this.columnWidth?0:1,n=Math.min(this.cols-1,n);for(var a=(this.options.isOriginTop?o.top:o.bottom)+e.outerHeight,u=r;n>=u;u++)this.colYs[u]=Math.max(a,this.colYs[u])},o.prototype._getContainerSize=function(){this.maxY=Math.max.apply(Math,this.colYs);var t={height:this.maxY};return this.options.isFitWidth&&(t.width=this._getContainerFitWidth()),t},o.prototype._getContainerFitWidth=function(){for(var t=0,i=this.cols;--i&&0===this.colYs[i];)t++;return(this.cols-t)*this.columnWidth-this.gutter},o.prototype.needsResizeLayout=function(){var t=this.containerWidth;return this.getContainerWidth(),t!==this.containerWidth},o});